% Meta-data o práci (je nutno upravit)
\input metadata.tex

% Vygenerujeme metadata ve formátu XMP pro použití balíčkem pdfx
\input xmp.tex

%% Verze pro jednostranný tisk:
% Okraje: levý 40mm, pravý 25mm, horní a dolní 25mm
% (ale pozor, LaTeX si sám přidává 1in)
\documentclass[12pt,a4paper]{article}
\setlength\textwidth{145mm}
\setlength\textheight{247mm}
\setlength\oddsidemargin{15mm}
\setlength\evensidemargin{15mm}
\setlength\topmargin{0mm}
\setlength\headsep{0mm}
\setlength\headheight{0mm}
% \openright zařídí, aby následující text začínal na pravé straně knihy
\let\openright=\clearpage

%% Pokud tiskneme oboustranně:
% \documentclass[12pt,a4paper,twoside,openright]{report}
% \setlength\textwidth{145mm}
% \setlength\textheight{247mm}
% \setlength\oddsidemargin{14.2mm}
% \setlength\evensidemargin{0mm}
% \setlength\topmargin{0mm}
% \setlength\headsep{0mm}
% \setlength\headheight{0mm}
% \let\openright=\cleardoublepage

%% Pokud práci odevzdáváme pouze elektronicky, vypadají lépe symetrické okraje
% \documentclass[12pt,a4paper]{report}
% \setlength\textwidth{145mm}
% \setlength\textheight{247mm}
% \setlength\oddsidemargin{10mm}
% \setlength\evensidemargin{10mm}
% \setlength\topmargin{0mm}
% \setlength\headsep{0mm}
% \setlength\headheight{0mm}
% \let\openright=\clearpage

%% Vytváříme PDF/A-2u
\usepackage[a-2u]{pdfx}

%% Přepneme na českou sazbu a fonty Latin Modern
\usepackage[czech]{babel}
\usepackage{lmodern}

% Pokud nepouživáme LuaTeX, je potřeba ještě nastavit kódování znaků
\usepackage{iftex}
\ifpdftex
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\fi

%%% Další užitečné balíčky (jsou součástí běžných distribucí LaTeXu)
\usepackage{amsmath}        % rozšíření pro sazbu matematiky
\usepackage{amsfonts}       % matematické fonty
\usepackage{amsthm}         % sazba vět, definic apod.
\usepackage{bm}             % tučné symboly (příkaz \bm)
\usepackage{booktabs}       % lepší vodorovné linky v tabulkách
\usepackage{caption}        % umožní definovat vlastní popisky plovoucích objektů
\usepackage{csquotes}       % uvozovky závislé na jazyku
\usepackage{dcolumn}        % vylepšené zarovnání sloupců tabulek
\usepackage{floatrow}       % umožní definovat vlastní typy plovoucích objektů
\usepackage{graphicx}       % vkládání obrázků
\usepackage{icomma}         % inteligetní čárka v matematickém módu
\usepackage{indentfirst}    % zavede odsazení 1. odstavce kapitoly
\usepackage[nopatch=item]{microtype}  % mikrotypografická rozšíření
\usepackage{paralist}       % lepší enumerate a itemize
\usepackage[nottoc]{tocbibind} % zajistí přidání seznamu literatury,
                            % obrázků a tabulek do obsahu
\usepackage{xcolor}         % barevná sazba

% Balíček hyperref, kterým jdou vyrábět klikací odkazy v PDF,
% ale hlavně ho používáme k uložení metadat do PDF (včetně obsahu).
% Většinu nastavítek přednastaví balíček pdfx.
\hypersetup{unicode}
\hypersetup{breaklinks=true}

% Balíčky pro sazbu informatických prací
\usepackage{algpseudocode}  % součást balíčku algorithmicx
\usepackage[Algoritmus]{algorithm}
\usepackage{fancyvrb}       % vylepšené prostředí verbatim
\usepackage{listings}       % zvýrazňování syntaxe zdrojových textů

% Cleveref může zjednodušit odkazování, ale jeho užitečnost pro češtinu
% je minimalní, protože nezvládá skloňování.
% \usepackage{cleveref}

% Formátování bibliografie (odkazů na literaturu)
% Detailní nastavení můžete upravit v souboru macros.tex.
%
% POZOR: Zvyklosti různých oborů a kateder se liší. Konzultujte se svým
% vedoucím, jaký formát citací je pro vaši práci vhodný!
%
% Základní formát podle normy ISO 690 s číslovanými odkazy
\usepackage[natbib,style=iso-numeric,sorting=none]{biblatex}
% ISO 690 s alfanumerickými odkazy (zkratky jmen autorů)
%\usepackage[natbib,style=iso-alphabetic]{biblatex}
% ISO 690 s citacemi tvaru Autor (rok)
%\usepackage[natbib,style=iso-authoryear]{biblatex}
%
% V některých oborech je běžnější obyčejný formát s číslovanými odkazy
% (sorting=none říká, že se bibliografie má řadit podle pořadí citací):
%\usepackage[natbib,style=numeric,sorting=none]{biblatex}
% Číslované odkazy, navíc se [1,2,3,4,5] komprimuje na [1-5]
%\usepackage[natbib,style=numeric-comp,sorting=none]{biblatex}
% Obyčejný formát s alfanumerickými odkazy:
%\usepackage[natbib,style=alphabetic]{biblatex}

%%%%%%%%%%%%%%%%
% moje vložené rozšíření:
\usepackage{tikz}


% Z tohoto souboru se načítají položky bibliografie
\addbibresource{literatura.bib}

% Definice různých užitečných maker (viz popis uvnitř souboru)
\input macros.tex



\begin{document}

\title{Příloha bakalářské práce\\
\\
Logik - algoritmy a strategie}
\author{
Martin Šimša\\
Katedra algebry\\
\\
Vedoucí práce: doc. Mgr. Pavel Růžička, Ph.D.
}
\date{2025}

\maketitle
\section{Úvod}
Toto je dokumentace k programu na testování algoritmů řešící hru [n,k]-Mastermind v souboru \texttt{mastermind-testing-algorithms.py}. Zároveň slouží jako příloha bakalářské práce s názvem Logik - algoritmy a strategie. Ta je dostupná například z https://github.com/martinsimsa/Bachelor-thesis-Mastermind.git. Případně bude k nalezení na stránce https://dspace.cuni.cz/.

V této dokumentaci používám značení z bakalářské práce.

\section{Použití}

\subsection{Získání programu}
\begin{itemize}
    \item Otevřete soubor \texttt{mastermind-testing-algorithms.py} dostupný z přílohy bakalářské práce.
    \item Program je také dostupný na GitHubu, https://github.com/martinsimsa/mastermind.git. Repozitář naklonujte
    \begin{itemize}
        \item Clone with HTTPS:
        https://github.com/martinsimsa/mastermind.git
        \item GitHub CLI:
        gh repo clone martinsimsa/mastermind    \end{itemize}
    \item Program běží v jazyce Python
    \begin{itemize}
        \item https://www.python.org/downloads/
        \item https://www.online-python.com/
    \end{itemize}
    \item Nainstalujte použité knihovny
    \begin{itemize}
        \item Deque z knihovny collections, která je součástí standardního balíčku Pythonu.
        \item Numpy - https://numpy.org/install/
    \end{itemize}
\end{itemize}

\subsection{Spuštění}

Po otevření zdrojového kódu zvolte, jakou funkci chcete spustit. Nějaké funkce byly v souboru předpřipraveny a stačí odstranit znak komentáře \#. 
\paragraph{Funkce \texttt{get\_results\_of\_algorithm()}}
Tato funkce slouží k analýze algoritmu složeného z valuace a strategie. Tvar volání funkce je následující:

\texttt{get\_results\_of\_algorithm(n, k, první tah, valuace, strategie, výběr z kandidátů)}
\begin{itemize}
    \item n - počet pozic
    \item k - počet barev
    \item první tah - pevně zvolený první tah, např pro n = 4, k = 6 [1,1,2,3]
    \item valuace - použitá valuace
    \item strategie - použitá strategie
    \item výběr z kandidátů - True - algoritmus vybírá pouze z kandidátů, 
        False - algoritmus vybírá ze všech kódů.
\end{itemize}


Přípustné kombinace valuace a strategie jsou:
\begin{itemize}
    \item find\_max, lower\_is\_better - algoritmus Min-max
    \item find\_entropy, higher\_is\_better - algoritmus Max entropy
    \item find\_number\_of\_parts, higher\_is\_better - algoritmus Most parts.
\end{itemize}
Příklad použití:
\texttt{get\_results\_of\_algorithm(4, 6, [1,1,2,2], find\_entropy, higher\_is\_better, False)}

\paragraph{Funkce \texttt{solve\_one\_game()}}
Funkce \texttt{solve\_one\_game} slouží ke spuštění daného algoritmu pro jeden pevně určený tajný kód. Tvar volání funkce je následující:

\texttt{solve\_one\_game(n, k, tajný kód, valuace, strategie, první tah, výběr z kandidátů)}
\begin{itemize}
    \item n - počet pozic
    \item k - počet barev
    \item tajný kód - tajný kód ve tvaru seznamu, např pro n = 4, k = 6: [5,1,6,3]
    \item první tah - pevně zvolený první tah, např pro n = 4, k = 6: [1,1,2,3]
    \item valuace - použitá valuace
    \item strategie - použitá strategie
    \item výběr z kandidátů - True - algoritmus vybírá pouze z kandidátů, 
        False - algoritmus vybírá ze všech kódů.
\end{itemize}

Přípustné kombinace valuace a strategie jsou stejné jako výše.
% - find_max, lower_is_better - algoritmus Min-max
% - find_entropy, higher_is_better - algoritmus Max entropy
% - find_number_of_parts, higher_is_better - algoritmus Most parts
Příklad použití:

\texttt{solve\_one\_game(4, 6, [5,1,6,3], find\_max, lower\_is\_better, [1,1,2,2], False)}



\section{Kontakt}
Martin Šimša, MFF CUNI, 3. roč., Matematika pro informační technologie (MITP)
LS 2024/2025, Bakalářská práce na téma Logik - algoritmy a strategie
simsa.martin@email.cz, martin.simsa926@student.cuni.cz
Vedoucí: doc. Mgr. Pavel Růžička, Ph.D.







\section{Technická dokumentace}
Tohle je technická dokumentace programu Mastermind - testování algoritmů. Byla vytvořena jako příloha k bakalářské práci Logik - algoritmy a strategie. 

## Obsah
Dokumentace obsahuje popisy jednotlivých funkcí a jejich propojení. 
- [Process](#installation)
- [Proměnné](#proměnné)
- [Funkce](#funkce)

## Proměnné
len_pegs - označuje počet pozic, v bakalářské práci tuto hodnotu značíme písmenem $n$.

len_colours - určuje počet barev (v práci jako $k$).

all_scores - seznam všech ohodnocení v $H_{n,k}$

all_codes - seznam všech kódů $H_{n,k}$

start_code - volba prvního pokusu, aby algoritmus nemusel procházet všechny kódy

possible_codes - Množina kandidátů aktuálního stavu.

partition - Množina potomků aktuální množiny kandidátů

partition_table - Velikosti množin potomků množiny kandidátů

secret_code - tajný kód

partition_table_function - proměnná uchovávající aktuálně používanou valuaci (find_max, find_entropy, find_number_of_parts)

compare_function - proměnná uchovávající aktuálně používanou strategii (higher_is_better, lower_is_better)

choose_from_candidates - proměnná, která udává, zda algoritmus vybírá kódy pro další pokusy pouze z množiny kandidátů (True), anebo z celého prostoru kódů (False)

partition_table_value - uchovává hodnotu valuace pro danou množinu kandidátů a kód.


## Funkce

#### evaluate_codes
Funkce evaluate_codes na vstupu dostane dva kódy a počet pozic a barev. Vrátí ohodnocení těchto dvou kódů. Nejprve spočítá počet černých kolíčků a počty výskytů barev v obou kódech. Následně vypočítá počet bílých kolíčků podle definice ohodnocení. 

#### generate_all_codes
Funkce generate_all_codes vygeneruje seznam všech kódů podle zadaného počtu pozic a počtu barev. Prochází všechna čísla od nuly do $k^n - 1$ a každé číslo konvertuje do kódu, který v lexikografickém pořadí odpovídá danému číslu. 

#### generate_all_scores
Tato funkce vygeneruje seznam všech možných ohodnocení pro zadaný počet pozic len_pegs. Nezohledňuje počet barev, a tedy pro dvě barvy generuje i ohodnocení, která mají lichý počet bílých kolíčků. Díky použitým valuacím a strategiím to ale na algoritmech nic nezmění.

#### find_max
Funkce pro zadané velikosti $|K_{u,r}|$ vrátí maximální hodnotu. 

#### find_entropy
Funkce pro zadané velikosti $|K_{u,r}|$ vrátí entropii tohoto rozdělení. Entropie je před vrácením výsledku zaokrouhlena na 7 desetinných míst, protože při různém pořadí výpočtu entropie se tento součet zaokrouhluje jinak a nevracel by rovnosti pro stejné rozdělení potomků.

#### find_number_of_parts
Funkce pro zadané velikosti $|K_{u,r}|$ vrátí počet neprázdných potomků.

#### lower_is_better
Tato funkce slouží na místo strategie. Porovnává hodnoty valuací a vrací pravdivostní hodnoty, zda je první množina menší než druhá. Ve výsledku napomáhá k nalezení minimální hodnoty valuace.

#### higher_is_better
Tato funkce slouží na místo strategie. Porovnává hodnoty valuací a vrací pravdivostní hodnoty, zda je první množina větší než druhá.Ve výsledku napomáhá k nalezení maximální hodnoty valuace.

#### create_next_partition
Tato funkce bere jako argumenty množinu kandidátů $K$ (possible codes) a další pokus $u$. Vrátí počty prvků v potomcích $K_{u,r}$ pro všechna ohodnocení $r \in S_{n,k}$.

#### find_best_guess
find_best_guess(possible_codes, len_pegs, len_colours, all_scores, all_codes, partition_table_function, compare_function, start_code=None, choose_from_candidates=False)

Tato funkce pro aktuální stav a zvolenou valuaci a strategii vrátí odpovídající další pokus. Vychází z proměnné possible_codes - množiny kandidátů. Projde celý prostor kódů (případně pouze množinu kandidátů) a pro každý kód (code) nalezne potomky množiny kandidátů vzhledem k tomuto kódu (temp_partition) a jejich velikosti (temp_partition_table). O to se stará funkce create_next_partition. Dále nalezne valuaci aktuálního kódu (temp_partition_table_value) a porovná ji s aktuální nejlepší hodnotou z hlediska zvolené strategie (compare_function). Ve chvíli, kdy je aktuální hodnota valuace menší, respektive větší (podle zvolené strategie) než průběžná nejlepší hodnota valuace (best_partition_table_value), program aktualizuje nejlepší hodnoty valuace, potomků a velikostí potomků. Pokud se valuace aktuálního kódu rovná průběžné nejlepší hodnotě valuace, program zkontroluje, jestli byl průběžně nejlepší kód kandidát. Pokud nebyl a aktuální kód je kandidátem, algoritmus aktualizuje nejlepší hodnoty valuace, potomků a velikostí potomků. 

Díky tomu, že algoritmy vybírají lexikograficky nejmenší kódy z množiny kódů s nejlepší valuací (případně průniku této množiny s množinou kandidátů), tak stačí uchovávat pouze první kód s nejlepší hodnotou valuace. Případně stačí kontrolovat, zda náleží do množiny kandidátů.

Ve chvíli, kdy program projde všechny kódy, ze kterých vybírá, vrátí zvolený nejlepší kód pro tento stav (best_next_guess). Společně s ním vrací i proměnné best_partition_table a best_partition. 

#### get_results_of_algorithm
Toto je hlavní funkce, která testuje algoritmy. Prochází stavový prostor a pro každý stav nalezne další pokus. Počty pokusů přičítá v případě, kdy zkoumá potomka vzhledem k ohodnocení $(n ,0)$.

#### solve_one_game
Tato funkce je implementací algoritmu $1$ v bakalářské práci. Na vstupu vezme počet pozic a barev, tajný kód, valuaci, strategii, případný pevně stanovený první pokus a True/False hodnotu, jestli se další pokus vybírá pouze z kandidátů. 

Pokud další pokus dostal maximální ohodnocení, shoduje se s tajným kódem a hra končí. 


#### get_valuation_of_first_guess
Tato funkce vrátí hodnotu valuace pro nějaký první pokus a zadanou valuaci. 

## main_function










\end{document}